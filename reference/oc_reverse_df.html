<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Reverse geocoding from latitude and longitude pairs to the names and
addresses of a location."><title>Reverse geocoding with data frames — oc_reverse_df • opencage</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reverse geocoding with data frames — oc_reverse_df"><meta property="og:description" content="Reverse geocoding from latitude and longitude pairs to the names and
addresses of a location."><meta property="og:image" content="https://docs.ropensci.org/opencage/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">opencage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../articles/opencage.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/customise_query.html">Customise your query</a>
    <a class="dropdown-item" href="../articles/output_options.html">Output options</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/opencage/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Reverse geocoding with data frames</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/opencage/blob/HEAD/R/oc_reverse.R" class="external-link"><code>R/oc_reverse.R</code></a></small>
      <div class="d-none name"><code>oc_reverse_df.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reverse geocoding from latitude and longitude pairs to the names and
addresses of a location.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">oc_reverse_df</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">oc_reverse_df</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">latitude</span>,</span>
<span>  <span class="va">longitude</span>,</span>
<span>  bind_cols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"short"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  language <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_confidence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadinfo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  no_annotations <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  no_dedupe <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  abbrv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  address_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for numeric</span></span>
<span><span class="fu">oc_reverse_df</span><span class="op">(</span></span>
<span>  <span class="va">latitude</span>,</span>
<span>  <span class="va">longitude</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"short"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  language <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_confidence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  no_annotations <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  no_dedupe <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  abbrv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  address_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>Ignored.</p></dd>


<dt>data</dt>
<dd><p>A data frame.</p></dd>


<dt>latitude, longitude</dt>
<dd><p>Unquoted variable names of numeric columns or
vectors of latitude and longitude values.</p></dd>


<dt>bind_cols</dt>
<dd><p>When <code>bind_col = TRUE</code>, the default, the results are column
bound to <code>data</code>. When <code>FALSE</code>, the results are returned as a new tibble.</p></dd>


<dt>output</dt>
<dd><p>A character vector of length one indicating whether only the
formatted address (<code>"short"</code>, the default) or all variables (<code>"all"</code>)
variables should be returned.</p></dd>


<dt>language</dt>
<dd><p>Character vector, or an unquoted variable name of such a
vector, of <a href="https://en.wikipedia.org/wiki/IETF_language_tag" class="external-link">IETF BCP 47 language tags</a> (such as "es" for
Spanish or "pt-BR" for Brazilian Portuguese). OpenCage will attempt to
return results in that language. Alternatively you can specify the "native"
tag, in which case OpenCage will attempt to return the response in the
"official" language(s). In case the <code>language</code> parameter is set to <code>NULL</code>
(which is the default), the tag is not recognized, or OpenCage does not
have a record in that language, the results will be returned in English.</p></dd>


<dt>min_confidence</dt>
<dd><p>Numeric vector of integer values, or an unquoted
variable name of such a vector, between 0 and 10 indicating the precision
of the returned result as defined by its geographical extent, (i.e. by the
extent of the result's bounding box). See the <a href="https://opencagedata.com/api#confidence" class="external-link">API documentation</a> for details. Only
results with at least the requested confidence will be returned. Default is
<code>NULL</code>).</p></dd>


<dt>roadinfo</dt>
<dd><p>Logical vector, or an unquoted variable name of such a
vector, indicating whether the geocoder should attempt to match the nearest
road (rather than an address) and provide additional road and driving
information. Default is <code>FALSE</code>.</p></dd>


<dt>no_annotations</dt>
<dd><p>Logical vector, or an unquoted variable name of such a
vector, indicating whether additional information about the result location
should be returned. <code>TRUE</code> by default, which means that the results will
not contain annotations.</p></dd>


<dt>no_dedupe</dt>
<dd><p>Logical vector, or an unquoted variable name of such a
vector. Default is <code>FALSE</code>. When <code>TRUE</code> the results will not be
deduplicated.</p></dd>


<dt>abbrv</dt>
<dd><p>Logical vector, or an unquoted variable name of such a vector.
Default is <code>FALSE</code>. When <code>TRUE</code> addresses in the <code>oc_formatted</code> variable of
the results are abbreviated (e.g. "Main St." instead of "Main Street").</p></dd>


<dt>address_only</dt>
<dd><p>Logical vector, or an unquoted variable name of such a
vector. Default is <code>FALSE</code>. When <code>TRUE</code> only the address details are
returned in the <code>oc_formatted</code> variable of the results, not the name of a
point-of-interest should there be one at this address.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble. Column names coming from the OpenCage API are prefixed with
<code>"oc_"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="oc_reverse.html">oc_reverse()</a></code> for inputs as vectors, or <code><a href="oc_forward.html">oc_forward()</a></code> and
<code><a href="oc_forward.html">oc_forward()</a></code> for forward geocoding. For more information about the API
and the various parameters, see the <a href="https://opencagedata.com/api" class="external-link">OpenCage API documentation</a>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># oc_key_present() &amp;&amp; oc_api_ok()</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span></span>
<span class="r-in"><span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">36.85007</span>, <span class="fl">47.21864</span>, <span class="fl">53.55034</span>, <span class="fl">34.05369</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  lng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">174.7706</span>, <span class="op">-</span><span class="fl">1.554136</span>, <span class="fl">10.000654</span>, <span class="op">-</span><span class="fl">118.242767</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return formatted address of lat/lng values</span></span></span>
<span class="r-in"><span><span class="fu">oc_reverse_df</span><span class="op">(</span><span class="va">df</span>, latitude <span class="op">=</span> <span class="va">lat</span>, longitude <span class="op">=</span> <span class="va">lng</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return more detailed information about the locations</span></span></span>
<span class="r-in"><span><span class="fu">oc_reverse_df</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  latitude <span class="op">=</span> <span class="va">lat</span>, longitude <span class="op">=</span> <span class="va">lng</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"all"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return results in a preferred language if possible</span></span></span>
<span class="r-in"><span><span class="fu">oc_reverse_df</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  latitude <span class="op">=</span> <span class="va">lat</span>, longitude <span class="op">=</span> <span class="va">lng</span>,</span></span>
<span class="r-in"><span>  language <span class="op">=</span> <span class="st">"fr"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># oc_reverse_df accepts unquoted column names for all</span></span></span>
<span class="r-in"><span><span class="co"># arguments except bind_cols and output.</span></span></span>
<span class="r-in"><span><span class="co"># This makes it possible to build up more detailed queries</span></span></span>
<span class="r-in"><span><span class="co"># through the data frame passed to the data argument.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html" class="external-link">add_column</a></span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  language <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"en"</span>, <span class="st">"fr"</span>, <span class="st">"de"</span>, <span class="st">"en"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  confidence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use language column to specify preferred language of results</span></span></span>
<span class="r-in"><span><span class="co"># and confidence column to allow different confidence levels</span></span></span>
<span class="r-in"><span><span class="fu">oc_reverse_df</span><span class="op">(</span><span class="va">df2</span>,</span></span>
<span class="r-in"><span>  latitude <span class="op">=</span> <span class="va">lat</span>, longitude <span class="op">=</span> <span class="va">lng</span>,</span></span>
<span class="r-in"><span>  language <span class="op">=</span> <span class="va">language</span>,</span></span>
<span class="r-in"><span>  min_confidence <span class="op">=</span> <span class="va">confidence</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

